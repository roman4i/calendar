(()=>{"use strict";function e(e){null!=document.getElementById("errorContent")&&document.getElementById("errorContent").remove();var t=document.createElement("div");return t.classList="errorCont",t.id="errorContent","participants"===e&&t.insertAdjacentText("afterbegin","Failed to create an event. Please choose participants"),"name"===e&&t.insertAdjacentText("afterbegin","Failed to create an event. Please enter event name"),"booked"===e&&t.insertAdjacentText("afterbegin","Failed to create an event. Time slot is booked. Please choose other"),t}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var n;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r={calendar:"calendar",createEvent:"createEvent"};const o={routeNames:r,routes:(a(n={},r.calendar,{name:r.calendar,path:"/calendar"}),a(n,r.createEvent,{name:r.createEvent,path:"/create-event"}),n)},c=function(e){var t=o.routes[e];window.history.pushState({},e,window.location.origin+""+t.path);var n=new CustomEvent("pushStateChanged",{detail:{route:t}});document.dispatchEvent(n)};var i=function e(t){var n=t.tagName,a=void 0===n?"div":n,r=t.id,o=t.type,c=t.classList,i=t.innerText,l=t.children,s=t.value,u=t.text,d=t.onclick,m=t.onchange,p=t.selectOptions,v=document.createElement(a);return r&&(v.id=r),c&&(v.classList=c),i&&(v.innerText=i),l&&l.length&&l.forEach((function(e){v.append(e)})),s&&(v.value=s),u&&(v.text=u),d&&(v.onclick=d),m&&(v.onchange=m),o&&(v.type=o),p&&p.length&&"select"===a&&p.forEach((function(t){var n=e({tagName:"option",value:t.value,text:t.text});v.add(n)})),v};function l(e){var t=JSON.parse(localStorage.getItem("eventsStorage")),n=document.createElement("div");n.id="delDiv",n.classList="mainDelCont";var a=document.createElement("div");a.classList="modal-content",n.append(a);var r=document.createElement("div");r.insertAdjacentText("afterbegin",'Are you sure ypu wand to delete \n"'.concat(e,'"?')),r.classList="delContStyle",a.append(r);var o=document.createElement("div");o.classList="buttonsCont",a.append(o);var c=document.createElement("input");c.type="button",c.value="No",c.onclick=function(){n.remove()},o.append(c);var i=document.createElement("input");i.type="button",i.value="Yes",i.onclick=function(){document.getElementById("cellDiv".concat(t[e].cell)).remove(),n.remove(),delete t[e],localStorage.setItem("eventsStorage",JSON.stringify(t))},o.append(i),document.getElementById("root").append(n)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t){var n=JSON.parse(localStorage.getItem("eventsStorage")),a=localStorage.getItem("currentUser"),r=JSON.parse(localStorage.getItem("admList"));"all"===e&&null!==n&&Object.entries(n).forEach((function(e){var t=s(e,2),n=t[0],o=t[1],c=document.getElementById("cell".concat(o.cell)),i=document.createElement("div");if(i.id="cellDiv".concat(o.cell),i.insertAdjacentText("afterbegin",n),i.classList="eventCell",c.append(i),r.includes(a)){var u=document.createElement("div");u.classList="closeBtn",u.insertAdjacentText("afterbegin","×"),u.onclick=function(){l(n)},i.append(u)}})),"single"===e&&Object.entries(n).forEach((function(e){var n=s(e,2),o=n[0],c=n[1];c.participiants.forEach((function(e){if(t===e){var n=document.getElementById("cell".concat(c.cell)),i=document.createElement("div");if(i.id="cellDiv".concat(c.cell),i.insertAdjacentText("afterbegin",o),i.classList="eventCell",n.append(i),r.includes(a)){var s=document.createElement("div");s.classList="closeBtn",s.insertAdjacentText("afterbegin","×"),s.onclick=function(){l(o)},i.append(s)}}}))}))}var m=[];function p(){var n=i({tagName:"div",id:"createEventDiv",classList:"eventDivStyle"}),a=i({tagName:"div",classList:"eventOptionDiv"}),r=i({tagName:"div",classList:"optionText"});r.insertAdjacentText("afterbegin","Name of the event:"),a.append(r);var l=i({tagName:"input",id:"nameField",type:"text",classList:"selectionEvent"});function s(e,t,a){var r=document.createElement("div");r.classList="eventOptionDiv";var o=document.createElement("div");o.insertAdjacentText("afterbegin",e),o.classList="optionText",r.append(o);var c=document.createElement("select");c.id=t,c.classList="selectionEvent",a.forEach((function(e,t){var n=document.createElement("option");n.value=t,n.text=e,c.add(n)})),r.append(c),n.append(r)}a.append(l),n.append(a),function(e,t,a){var r=document.createElement("div");r.classList="eventOptionDiv";var o=i({tagName:"div",innerText:"Participants:",classList:"optionText"});r.append(o);var c=i({tagName:"select",id:"choosePerson",classList:"selectionEvent"}),l=i({tagName:"option",text:"Select names"});c.add(l),a.forEach((function(e,t){var n=i({tagName:"option",value:t+1,text:e});c.add(n)})),c.onchange=function(){if(void 0!==m[0]){for(var e=!0,t=m.length;t>=0;t-=1)c.options[c.selectedIndex].text===m[t]&&(m.splice(t,1),e=!1,l.text=m.reduce((function(e,t){return e+",".concat(t)})));e&&(m.push(c.options[c.selectedIndex].text),l.text=m.reduce((function(e,t){return e+",".concat(t)}))),c.selectedIndex="0"}else m.push(c.options[c.selectedIndex].text),l.text=m.reduce((function(e,t){return e+",".concat(t)}))},r.append(c),n.append(r)}(0,0,JSON.parse(localStorage.getItem("nameList"))),s("Day:","daySelect",["Monday","Tuesday","Wednesday","Thursday","Friday"]),s("Time:","timeSelect",["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"]);var u=document.createElement("div");u.classList="buttonsStyle";var p=document.createElement("input");p.type="button",p.id="cancelEventCreate",p.value="Cancel",p.classList="eventButton cancelButton",p.onclick=function(){c(o.routeNames.calendar),n.remove(),null!=document.getElementById("errorContent")&&document.getElementById("errorContent").remove(),d("all")},u.append(p);var v=document.createElement("input");v.type="button",v.value="Create",v.classList="eventButton",v.onclick=function(){(function(){var n,a,r,o={participiants:[]},c=!1,i=document.getElementById("nameField").value;if(""!==i){o.name=i;var l=document.getElementById("choosePerson").item(0).text.split(",");l.length>0?o.participiants=function(e){if(Array.isArray(e))return t(e)}(r=l)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}():(c||document.getElementById("root").prepend(e("participants")),c=!0)}else document.getElementById("root").prepend(e("name")),c=!0;if(c)return!1;o.day=document.getElementById("daySelect").selectedOptions[0].label,o.time=document.getElementById("timeSelect").selectedOptions[0].label,["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"].forEach((function(e,t){o.time===e&&(a=t+1)})),["Monday","Tuesday","Wednesday","Thursday","Friday"].forEach((function(e,t){o.day===e&&(n=t+1)}));var s=6*a+n+1,u=!1,d=JSON.parse(localStorage.getItem("eventsStorage"));return null==d?((d={})[o.name]={},d[o.name].participiants=o.participiants,d[o.name].day=o.day,d[o.name].time=o.time,d[o.name].cell=s,localStorage.setItem("eventsStorage",JSON.stringify(d)),null!=document.getElementById("errorContent")&&document.getElementById("errorContent").remove(),!0):(Object.values(d).forEach((function(t){t.cell===s&&(document.getElementById("root").prepend(e("booked")),u=!0)})),u?void 0:(d[o.name]={},d[o.name].participiants=o.participiants,d[o.name].day=o.day,d[o.name].time=o.time,d[o.name].cell=s,localStorage.setItem("eventsStorage",JSON.stringify(d)),null!=document.getElementById("errorContent")&&document.getElementById("errorContent").remove(),!0))})()&&(c(o.routeNames.calendar),d("all"),n.remove())},m=[],u.append(v),n.append(u),document.getElementById("root").append(n)}function v(){var e=document.createElement("div");e.id="tableCont",e.classList="tableContainer";var t=document.createElement("table"),n=document.createElement("tr");["Name","Mon","Tue","Wed","Thu","Fri"].forEach((function(e,t){var a=document.createElement("td");a.id="cell".concat(t),a.classList="headColorise tabCell",a.innerText=e,n.append(a)})),t.append(n);for(var a=7,r=1;r<10;r+=1){for(var o=document.createElement("tr"),c=0;c<6;c+=1){var i=document.createElement("td");i.id="cell".concat(a),i.classList="tabCell",a+=1,o.append(i)}t.append(o)}e.append(t),document.getElementById("calendarDivCont").append(e);for(var l=10,s=7;s<56;s+=6)document.getElementById("cell".concat(s)).innerText="".concat(l,":00"),l+=1}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(){function e(t){S(this,e),x(this,"rights","basic"),this.name=t}var t,n;return t=e,(n=[{key:"rights",get:function(){return this.rights},set:function(e){this.name=e}}])&&I(t.prototype,n),e}(),L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=E(t);if(n){var r=E(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return h(this,e)});function r(){var e;S(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return x(b(e=a.call.apply(a,[this].concat(n))),"rights","admin"),e}return r}(O);localStorage.setItem("nameList",JSON.stringify(["Igor","Oleg","Olga","Yaroslav","Anna"])),localStorage.setItem("admList",JSON.stringify(["Oleg","Olga"])),localStorage.setItem("currentUser","none"),window.onpopstate=function(){var e=Object.values(o.routes).find((function(e){return window.location.pathname.includes(e.path)}));e&&c(e.name),window.location.pathname==="".concat("").concat(o.routes[o.routeNames.createEvent].path)&&document.getElementById("calendarDivCont").remove(),window.location.pathname==="".concat("").concat(o.routes[o.routeNames.calendar].path)&&document.getElementById("createEventDiv").remove()},document.addEventListener("pushStateChanged",(function(e){switch(e.detail.route.name){case o.routeNames.calendar:t=i({tagName:"div",id:"calendarDivCont",classList:"calendarDiv"}),document.getElementById("root").append(t),function(e){function t(){document.getElementById("tableCont").remove(),v()}var n,a,r=i({tagName:"select",id:"personSelect",classList:"personSelect",selectOptions:(n=JSON.parse(localStorage.getItem("nameList")),[{value:0,text:"All members"}].concat((a=n.map((function(e,t){return{value:t+1,text:e}})),function(e){if(Array.isArray(e))return f(e)}(a)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))),onchange:function(){if(0===r.options.selectedIndex)t(),d("all");else{t();var e=r.options.selectedIndex;d("single",r.options[e].text)}}}),l=i({tagName:"div",id:"calendarContainer",classList:"headStyle",children:[i({tagName:"div",innerText:"Calendar",classList:"headText"}),i({tagName:"div",classList:"eventContainer",children:[r,i({tagName:"input",id:"createEvent",type:"button",value:"New event +",classList:"newEvent",onclick:function(){c(o.routeNames.createEvent),e.remove()}})]})]});e.append(l)}(t),v();break;case o.routeNames.createEvent:p()}var t})),function(){var e=JSON.parse(localStorage.getItem("nameList")),t=JSON.parse(localStorage.getItem("admList")),n=[];e.forEach((function(e){t.includes(e)?n.push(new L(e)):n.push(new O(e))}));var a=document.getElementById("root"),r=i({classList:"mainDelCont"});a.append(r);var o=i({classList:"modal-content"});r.append(o);var c=i({classList:"delContStyle",innerText:"Please authorise"});o.append(c);var l=i({classList:"buttonsCont"});o.append(l);var s=[];e.forEach((function(e,t){s.push({value:t,text:e})}));var u=i({tagName:"select",selectOptions:s});l.append(u);var m=i({tagName:"input",type:"button",value:"Confirm",onclick:function(){var e=u.options[u.selectedIndex].text;n.forEach((function(t){e===t.name&&"basic"===t.rights&&(document.getElementById("createEvent").disabled=!0),localStorage.setItem("currentUser",e)})),r.remove(),d("all")}});l.append(m)}(),c(o.routeNames.calendar)})();