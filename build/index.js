(()=>{"use strict";function e(e,t){window.history.pushState({},e,window.location.origin+e),t[e]()}function t(e){const t=JSON.parse(localStorage.getItem("eventsStorage")),n=document.createElement("div");n.id="delDiv",n.classList="mainDelCont";const o=document.createElement("div");o.classList="modal-content",n.append(o);const a=document.createElement("div");a.insertAdjacentText("afterbegin",`Are you sure ypu wand to delete \n"${e}"?`),a.classList="delContStyle",o.append(a);const c=document.createElement("div");c.classList="buttonsCont",o.append(c);const l=document.createElement("input");l.type="button",l.value="No",l.onclick=()=>{n.remove()},c.append(l);const d=document.createElement("input");d.type="button",d.value="Yes",d.onclick=()=>{document.getElementById(`cellDiv${t[e].cell}`).remove(),n.remove(),delete t[e],localStorage.setItem("eventsStorage",JSON.stringify(t))},c.append(d),document.getElementById("root").append(n)}function n(e,n){const o=JSON.parse(localStorage.getItem("eventsStorage"));if("all"===e&&null!=o)for(const e in o){const n=document.getElementById(`cell${o[e].cell}`),a=document.createElement("div");a.id=`cellDiv${o[e].cell}`,a.insertAdjacentText("afterbegin",e),a.classList="eventCell",n.append(a);const c=document.createElement("div");c.style.cursor="pointer",c.insertAdjacentText("afterbegin","×"),c.onclick=()=>{t(e)},a.append(c)}if("single"===e)for(const e in o)o[e].participiants.forEach((a=>{if(n===a){const n=document.getElementById(`cell${o[e].cell}`),a=document.createElement("div");a.id=`cellDiv${o[e].cell}`,a.insertAdjacentText("afterbegin",e),a.classList="eventCell",n.append(a);const c=document.createElement("div");c.insertAdjacentText("afterbegin","×"),c.onclick=()=>{t(e)},a.append(c)}}))}function o(){const e=document.createElement("div");e.id="tableCont",e.classList="tableContainer";const t=document.createElement("table"),n=document.createElement("tr");["Name","Mon","Tue","Wed","Thu","Fri"].forEach(((e,t)=>{const o=document.createElement("td");o.id=`cell${t}`,o.classList="headColorise tabCell",o.innerText=e,n.append(o)})),t.append(n);let o=7;for(let e=1;e<10;e++){const e=document.createElement("tr");for(let t=0;t<6;t++){const t=document.createElement("td");t.id=`cell${o}`,t.classList="tabCell",o++,e.append(t)}t.append(e)}e.append(t),document.getElementById("calendarDivCont").append(e);let a=10;for(let e=7;e<56;e+=6)document.getElementById(`cell${e}`).innerText=`${a}:00`,a+=1}function a(e){null!=document.getElementById("errorContent")&&document.getElementById("errorContent").remove();const t=document.createElement("div");return t.classList="errorCont",t.id="errorContent","participants"===e&&t.insertAdjacentText("afterbegin","Failed to create an event. Please choose participants"),"name"===e&&t.insertAdjacentText("afterbegin","Failed to create an event. Please enter event name"),"booked"===e&&t.insertAdjacentText("afterbegin","Failed to create an event. Time slot is booked. Please choose other"),t}const c={"/calendar":()=>{!function(e,t){const a=document.createElement("div");a.id="calendarDivCont",a.classList="calendarDiv",document.getElementById("root").append(a),function(e,t){function a(){document.getElementById("tableCont").remove(),o()}const c=document.createElement("div");c.id="calendarContainer",c.classList="headStyle";const l=document.createElement("div");l.innerText="Calendar",l.classList="headText",c.append(l);const d=document.createElement("div");d.classList="eventContainer",c.append(d);const i=document.createElement("select");i.id="personSelect",i.classList="personSelect",d.append(i);const s=JSON.parse(localStorage.getItem("nameList")),r=document.createElement("option");r.value=0,r.text="All members",i.add(r),s.forEach(((e,t)=>{const n=document.createElement("option");n.value=t+1,n.text=e,i.add(n)})),i.onchange=()=>{if(0==i.options.selectedIndex)a(),n("all");else{a();const e=i.options.selectedIndex;n("single",i.options[e].text)}};const m=document.createElement("input");m.id="createEvent",m.type="button",m.value="New event +",m.classList="newEvent",m.onclick=()=>{e("/create-event",t),document.getElementById("calendarDivCont").remove()},d.append(m),document.getElementById("calendarDivCont").append(c)}(e,t),o(),n("all")}(e,c)},"/create-event":()=>{!function(e,t){const n=document.createElement("div");n.id="createEventDiv",n.classList="eventDivStyle";const o=document.createElement("div");o.classList="eventOptionDiv";const c=document.createElement("div");c.insertAdjacentText("afterbegin","Name of the event:"),c.classList="optionText",o.append(c);const l=document.createElement("input");function d(e,t,o,a){const c=document.createElement("div");c.classList="eventOptionDiv";const l=document.createElement("div");l.insertAdjacentText("afterbegin",e),l.classList="optionText",c.append(l);const d=document.createElement("select");d.id=t,d.multiple=a,d.classList="selectionEvent",a&&(d.style.height="auto",d.size=1),o.forEach(((e,t)=>{const n=document.createElement("option");n.value=t,n.text=e,d.add(n)})),c.append(d),n.append(c)}l.type="text",l.id="nameField",l.classList="selectionEvent",o.append(l),n.append(o),d("Participants:","choosePerson",JSON.parse(localStorage.getItem("nameList")),!0),d("Day:","daySelect",["Monday","Tuesday","Wednesday","Thursday","Friday"],!1),d("Time:","timeSelect",["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],!1);const i=document.createElement("div");i.classList="buttonsStyle";const s=document.createElement("input");s.type="button",s.id="cancelEventCreate",s.value="Cancel",s.classList="eventButton cancelButton",s.onclick=()=>{e("/calendar",t),n.remove(),null!=document.getElementById("errorContent")&&document.getElementById("errorContent").remove()},i.append(s);const r=document.createElement("input");r.type="button",r.value="Create",r.classList="eventButton",r.onclick=()=>{(function(){const e={participiants:[]};let t=!1;const n=document.getElementById("nameField").value;if(""!==n){e.name=n;const o=document.getElementById("choosePerson").selectedOptions;if(o.length>0){const t=o;for(let n=0;n<t.length;n++)e.participiants.push(t[n].label)}else t||document.getElementById("root").prepend(a("participants")),t=!0}else document.getElementById("root").prepend(a("name")),t=!0;if(t)return!1;{let t,n,o;e.day=document.getElementById("daySelect").selectedOptions[0].label,e.time=document.getElementById("timeSelect").selectedOptions[0].label,["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"].forEach(((t,o)=>{e.time===t&&(n=o+1)})),["Monday","Tuesday","Wednesday","Thursday","Friday"].forEach(((n,o)=>{e.day===n&&(t=o+1)})),o=6*n+t+1;let c=!1,l=JSON.parse(localStorage.getItem("eventsStorage"));if(null==l)return l={},l[e.name]={},l[e.name].participiants=e.participiants,l[e.name].day=e.day,l[e.name].time=e.time,l[e.name].cell=o,localStorage.setItem("eventsStorage",JSON.stringify(l)),null!=document.getElementById("errorContent")&&document.getElementById("errorContent").remove(),!0;for(let e in l)l[e].cell===o&&(document.getElementById("root").prepend(a("booked")),c=!0);if(!c)return l[e.name]={},l[e.name].participiants=e.participiants,l[e.name].day=e.day,l[e.name].time=e.time,l[e.name].cell=o,localStorage.setItem("eventsStorage",JSON.stringify(l)),null!=document.getElementById("errorContent")&&document.getElementById("errorContent").remove(),!0}})()&&(e("/calendar",t),n.remove())},i.append(r),n.append(i),document.getElementById("root").append(n)}(e,c)}};localStorage.setItem("nameList",JSON.stringify(["Igor","Oleg","Olga","Yaroslav","Anna"])),window.onpopstate=()=>{e(window.location.pathname,c),"/create-event"===window.location.pathname&&document.getElementById("calendarDivCont").remove(),"/calendar"===window.location.pathname&&document.getElementById("createEventDiv").remove()},e("/calendar",c)})();